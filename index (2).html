<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Parking Lot Management</title>
</head>
<body>
  <h2>ðŸš— Parking Lot Management System</h2>

  <div>
    <input type="text" id="vehicleId" placeholder="Enter Vehicle ID" />
    <button onclick="parkVehicle()">Park Vehicle</button>
    <button onclick="removeVehicle()">Remove Vehicle</button>
    <button onclick="getStatus()">Show Parking Status</button>
  </div>

  <h3>Current Parking Slots:</h3>
  <pre id="output">Click "Show Parking Status" to view slots.</pre>

  <script>
    // Function to show current parking status
    function getStatus() {
      fetch("/api/status")
        .then(res => res.json())
        .then(data => {
          let text = "";
          data.slots.forEach(s => {
          text += `${s.slot} â†’ ${s.vehicle}\n`;
          });
          document.getElementById("output").textContent = text;
        })
        .catch(err => alert("Error fetching status! Make sure backend is running."));
    }

    // Function to park a vehicle
    function parkVehicle() {
      const vehicle = document.getElementById("vehicleId").value.trim();
      if (!vehicle) return alert("Please enter a vehicle ID!");
      fetch("/api/park", { method: "POST", body: vehicle })
        .then(res => res.json())
        .then(data => {
          alert(data.message);
          getStatus();
        })
        .catch(() => alert("Error parking vehicle!"));
    }

    // Function to remove a vehicle
    function removeVehicle() {
      const vehicle = document.getElementById("vehicleId").value.trim();
      if (!vehicle) return alert("Please enter a vehicle ID!");
      fetch("/api/remove", { method: "POST", body: vehicle })
        .then(res => res.json())
        .then(data => {
          alert(data.message);
          getStatus();
        })
        .catch(() => alert("Error removing vehicle!"));
    }
  </script>
</body>
</html>